<div class="container mt-5 mb-5">
  <h1 class="mb-4 display-4">Painel Administrativo</h1>
  <div class="row justify-content-center">
    <div class="col-lg-8 mb-4">
      <div class="card">
        <div class="card-header">
          <h3>Criar Novo Mangá</h3>
          <p class="text-muted mb-0">Preencha os dados do mangá</p>
        </div>

        <div class="card-body">
          <form [formGroup]="mangaForm" (ngSubmit)="onSubmit()">
            
            <div class="mb-3">
              <label for="title" class="form-label">Título <span class="text-danger">*</span></label>
              <input 
                type="text" 
                class="form-control" 
                id="title"
                formControlName="title" 
                placeholder="Ex: One Piece">
              <div class="invalid-feedback d-block" *ngIf="mangaForm.get('title')?.hasError('required') && mangaForm.get('title')?.touched">
                O título é obrigatório
              </div>
            </div>

            <div class="mb-3">
              <label for="author" class="form-label">Autor <span class="text-danger">*</span></label>
              <input 
                type="text" 
                class="form-control" 
                id="author"
                formControlName="author" 
                placeholder="Ex: Eiichiro Oda">
              <div class="invalid-feedback d-block" *ngIf="mangaForm.get('author')?.hasError('required') && mangaForm.get('author')?.touched">
                O autor é obrigatório
              </div>
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Descrição <span class="text-danger">*</span></label>
              <textarea 
                class="form-control" 
                id="description"
                formControlName="description" 
                rows="4" 
                placeholder="Descrição do mangá"></textarea>
              <div class="invalid-feedback d-block" *ngIf="mangaForm.get('description')?.hasError('required') && mangaForm.get('description')?.touched">
                A descrição é obrigatória
              </div>
              <div class="invalid-feedback d-block" *ngIf="mangaForm.get('description')?.hasError('minlength') && mangaForm.get('description')?.touched">
                A descrição deve ter pelo menos 10 caracteres
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="rating" class="form-label">Rating (0-10) <span class="text-danger">*</span></label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="rating"
                  formControlName="rating" 
                  placeholder="Ex: 8.5" 
                  min="0" 
                  max="10" 
                  step="0.1">
                <div class="invalid-feedback d-block" *ngIf="(mangaForm.get('rating')?.hasError('min') || mangaForm.get('rating')?.hasError('max')) && mangaForm.get('rating')?.touched">
                  O rating deve estar entre 0 e 10
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="status" class="form-label">Status <span class="text-danger">*</span></label>
                <select class="form-select" id="status" formControlName="status">
                  <option value="">Selecione o status</option>
                  <option *ngFor="let status of statusOptions" [value]="status">
                    {{ status }}
                  </option>
                </select>
                <div class="invalid-feedback d-block" *ngIf="mangaForm.get('status')?.hasError('required') && mangaForm.get('status')?.touched">
                  O status é obrigatório
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="genres" class="form-label">Gênero <span class="text-danger">*</span></label>
              <select class="form-select" id="genres" formControlName="genres">
                <option value="">Selecione o gênero</option>
                <option *ngFor="let genre of genreOptions" [value]="genre">
                  {{ genre }}
                </option>
              </select>
              <div class="invalid-feedback d-block" *ngIf="mangaForm.get('genres')?.hasError('required') && mangaForm.get('genres')?.touched">
                O gênero é obrigatório
              </div>
            </div>

            <div class="mb-3">
              <label for="keywords" class="form-label">Palavras-chave (opcional)</label>
              <input 
                type="text" 
                class="form-control" 
                id="keywords"
                formControlName="keywords" 
                placeholder="Ex: pirata, tesouro, aventura">
              <small class="form-text text-muted">Separe as palavras-chave por vírgula</small>
            </div>

            <div class="mb-3">
              <label for="imageUrl" class="form-label">URL da Imagem (opcional)</label>
              <input 
                type="url" 
                class="form-control" 
                id="imageUrl"
                formControlName="imageUrl" 
                placeholder="https://example.com/imagem.jpg">
              <small class="form-text text-muted">Cole a URL de uma imagem da capa do mangá</small>
            </div>

            <div *ngIf="successMessage" class="alert alert-success" role="alert">
              {{ successMessage }}
            </div>

            <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
              {{ errorMessage }}
            </div>

            <div class="d-flex gap-2">
              <button 
                type="submit" 
                class="btn btn-primary" 
                [disabled]="loading || mangaForm.invalid">
                {{ loading ? 'Criando...' : 'Criar Mangá' }}
              </button>
              <button 
                type="button" 
                class="btn btn-secondary" 
                routerLink="/" 
                [disabled]="loading">
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-8 mb-4">
      <div class="card">
        <div class="card-header">
          <h3>Adicionar Volume a um Mangá</h3>
          <p class="text-muted mb-0">Adicione volumes aos mangás existentes</p>
        </div>

        <div class="card-body">
          <form [formGroup]="volumeForm" (ngSubmit)="onSubmitVolume()">
            
            <div class="mb-3">
              <label for="mangaId" class="form-label">ID do Mangá <span class="text-danger">*</span></label>
              <input 
                type="text" 
                class="form-control" 
                id="mangaId"
                formControlName="mangaId" 
                placeholder="Ex: 123e4567-e89b-12d3-a456-426614174000">
              <small class="form-text text-muted">Copie o ID do mangá da URL ou da lista de mangás</small>
              <div class="invalid-feedback d-block" *ngIf="volumeForm.get('mangaId')?.hasError('required') && volumeForm.get('mangaId')?.touched">
                O ID do mangá é obrigatório
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="volumeNumber" class="form-label">Número do Volume <span class="text-danger">*</span></label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="volumeNumber"
                  formControlName="volumeNumber" 
                  placeholder="Ex: 1"
                  min="1">
                <div class="invalid-feedback d-block" *ngIf="volumeForm.get('volumeNumber')?.hasError('required') && volumeForm.get('volumeNumber')?.touched">
                  O número do volume é obrigatório
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="price" class="form-label">Preço (R$) <span class="text-danger">*</span></label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="price"
                  formControlName="price" 
                  placeholder="Ex: 29.90"
                  min="0"
                  step="0.01">
                <div class="invalid-feedback d-block" *ngIf="volumeForm.get('price')?.hasError('required') && volumeForm.get('price')?.touched">
                  O preço é obrigatório
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="chapters" class="form-label">Número de Capítulos <span class="text-danger">*</span></label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="chapters"
                  formControlName="chapters" 
                  placeholder="Ex: 10"
                  min="1">
                <div class="invalid-feedback d-block" *ngIf="volumeForm.get('chapters')?.hasError('required') && volumeForm.get('chapters')?.touched">
                  O número de capítulos é obrigatório
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="releaseDate" class="form-label">Data de Lançamento <span class="text-danger">*</span></label>
                <input 
                  type="date" 
                  class="form-control" 
                  id="releaseDate"
                  formControlName="releaseDate">
                <div class="invalid-feedback d-block" *ngIf="volumeForm.get('releaseDate')?.hasError('required') && volumeForm.get('releaseDate')?.touched">
                  A data de lançamento é obrigatória
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="quantity" class="form-label">Quantidade em Estoque <span class="text-danger">*</span></label>
              <input 
                type="number" 
                class="form-control" 
                id="quantity"
                formControlName="quantity" 
                placeholder="Ex: 50"
                min="0">
              <div class="invalid-feedback d-block" *ngIf="volumeForm.get('quantity')?.hasError('required') && volumeForm.get('quantity')?.touched">
                A quantidade é obrigatória
              </div>
            </div>

            <div *ngIf="volumeSuccessMessage" class="alert alert-success" role="alert">
              {{ volumeSuccessMessage }}
            </div>

            <div *ngIf="volumeErrorMessage" class="alert alert-danger" role="alert">
              {{ volumeErrorMessage }}
            </div>

            <div class="d-flex gap-2">
              <button 
                type="submit" 
                class="btn btn-success" 
                [disabled]="volumeLoading || volumeForm.invalid">
                {{ volumeLoading ? 'Adicionando...' : 'Adicionar Volume' }}
              </button>
              <button 
                type="button" 
                class="btn btn-secondary" 
                (click)="volumeForm.reset()"
                [disabled]="volumeLoading">
                Limpar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
